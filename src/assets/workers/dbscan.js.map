{"version":3,"file":"./src/assets/workers/dbscan.js","mappings":"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","sources":["webpack://free-space/./node_modules/d3-octree/src/add.js","webpack://free-space/./node_modules/d3-octree/src/octant.js","webpack://free-space/./node_modules/d3-octree/src/x.js","webpack://free-space/./node_modules/d3-octree/src/y.js","webpack://free-space/./node_modules/d3-octree/src/z.js","webpack://free-space/./node_modules/d3-octree/src/octree.js","webpack://free-space/./node_modules/ramda/es/internal/_isPlaceholder.js","webpack://free-space/./node_modules/ramda/es/internal/_curry1.js","webpack://free-space/./node_modules/ramda/es/internal/_curry2.js","webpack://free-space/./node_modules/d3-octree/src/cover.js","webpack://free-space/./node_modules/d3-octree/src/data.js","webpack://free-space/./node_modules/d3-octree/src/extent.js","webpack://free-space/./node_modules/d3-octree/src/find.js","webpack://free-space/./node_modules/d3-octree/src/remove.js","webpack://free-space/./node_modules/d3-octree/src/root.js","webpack://free-space/./node_modules/d3-octree/src/size.js","webpack://free-space/./node_modules/d3-octree/src/visit.js","webpack://free-space/./node_modules/d3-octree/src/visitAfter.js","webpack://free-space/./node_modules/ramda/es/internal/_isInteger.js","webpack://free-space/./node_modules/ramda/es/prop.js","webpack://free-space/./node_modules/ramda/es/internal/_prop.js","webpack://free-space/./node_modules/ramda/es/internal/_nth.js","webpack://free-space/./node_modules/ramda/es/internal/_isArray.js","webpack://free-space/./node_modules/ramda/es/internal/_checkForMethod.js","webpack://free-space/./node_modules/ramda/es/internal/_curry3.js","webpack://free-space/./node_modules/ramda/es/slice.js","webpack://free-space/./node_modules/ramda/es/splitEvery.js","webpack://free-space/./src/utils/point-distance.ts","webpack://free-space/./src/utils/create-point.ts","webpack://free-space/./src/utils/get-random-point.ts","webpack://free-space/./src/utils/sphere-contains.ts","webpack://free-space/./src/utils/add-simple-points.ts","webpack://free-space/./src/utils/multiply-simple-point.ts","webpack://free-space/./node_modules/ramda/es/internal/_has.js","webpack://free-space/./node_modules/ramda/es/internal/_isArguments.js","webpack://free-space/./node_modules/ramda/es/keys.js","webpack://free-space/./src/utils/db-scan/db-scan.ts","webpack://free-space/./src/utils/serialize-tree.ts","webpack://free-space/./node_modules/ramda/es/pick.js","webpack://free-space/./node_modules/ramda/es/internal/_dispatchable.js","webpack://free-space/./node_modules/ramda/es/internal/_isTransformer.js","webpack://free-space/./node_modules/ramda/es/internal/_isArrayLike.js","webpack://free-space/./node_modules/ramda/es/internal/_isString.js","webpack://free-space/./node_modules/ramda/es/internal/_xArrayReduce.js","webpack://free-space/./node_modules/ramda/es/internal/_createReduce.js","webpack://free-space/./node_modules/ramda/es/internal/_arity.js","webpack://free-space/./node_modules/ramda/es/bind.js","webpack://free-space/./node_modules/ramda/es/internal/_xReduce.js","webpack://free-space/./node_modules/ramda/es/internal/_xfBase.js","webpack://free-space/./node_modules/ramda/es/internal/_flatCat.js","webpack://free-space/./node_modules/ramda/es/internal/_forceReduced.js","webpack://free-space/./node_modules/ramda/es/internal/_xmap.js","webpack://free-space/./node_modules/ramda/es/internal/_xchain.js","webpack://free-space/./node_modules/ramda/es/internal/_curryN.js","webpack://free-space/./node_modules/ramda/es/curryN.js","webpack://free-space/./node_modules/ramda/es/map.js","webpack://free-space/./node_modules/ramda/es/internal/_arrayReduce.js","webpack://free-space/./node_modules/ramda/es/internal/_map.js","webpack://free-space/./node_modules/ramda/es/chain.js","webpack://free-space/./node_modules/ramda/es/internal/_chain.js","webpack://free-space/./node_modules/ramda/es/internal/_makeFlat.js","webpack://free-space/./node_modules/ramda/es/type.js","webpack://free-space/./node_modules/ramda/es/internal/_clone.js","webpack://free-space/./node_modules/ramda/es/internal/_cloneRegExp.js","webpack://free-space/./node_modules/ramda/es/internal/_xreduceBy.js","webpack://free-space/./node_modules/ramda/es/internal/_xwrap.js","webpack://free-space/./node_modules/ramda/es/indexBy.js","webpack://free-space/./node_modules/ramda/es/reduceBy.js","webpack://free-space/./node_modules/ramda/es/internal/_reduced.js","webpack://free-space/./src/utils/point-to-string.ts","webpack://free-space/./src/worker/dbscan.worker.ts","webpack://free-space/./src/utils/generate-non-overlapping-spheres.ts","webpack://free-space/./src/utils/random-from-array.ts","webpack://free-space/./src/utils/sphere-overlaps.ts","webpack://free-space/./src/utils/get-point-grid.ts","webpack://free-space/./src/utils/get-void-points.ts","webpack://free-space/./src/utils/get-neighbors.ts","webpack://free-space/./src/utils/cube-overlaps-sphere.ts","webpack://free-space/./src/utils/points-equal.ts"],"sourcesContent":["export default function(d) {\n  var x = +this._x.call(null, d),\n      y = +this._y.call(null, d),\n      z = +this._z.call(null, d);\n  return add(this.cover(x, y, z), x, y, z, d);\n}\n\nfunction add(tree, x, y, z, d) {\n  if (isNaN(x) || isNaN(y) || isNaN(z)) return tree; // ignore invalid points\n\n  var parent,\n      node = tree._root,\n      leaf = {data: d},\n      x0 = tree._x0,\n      y0 = tree._y0,\n      z0 = tree._z0,\n      x1 = tree._x1,\n      y1 = tree._y1,\n      z1 = tree._z1,\n      xm,\n      ym,\n      zm,\n      xp,\n      yp,\n      zp,\n      right,\n      bottom,\n      deep,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return tree._root = leaf, tree;\n\n  // Find the existing leaf for the new point, or add it.\n  while (node.length) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (deep = z >= (zm = (z0 + z1) / 2)) z0 = zm; else z1 = zm;\n    if (parent = node, !(node = node[i = deep << 2 | bottom << 1 | right])) return parent[i] = leaf, tree;\n  }\n\n  // Is the new point is exactly coincident with the existing point?\n  xp = +tree._x.call(null, node.data);\n  yp = +tree._y.call(null, node.data);\n  zp = +tree._z.call(null, node.data);\n  if (x === xp && y === yp && z === zp) return leaf.next = node, parent ? parent[i] = leaf : tree._root = leaf, tree;\n\n  // Otherwise, split the leaf node until the old and new point are separated.\n  do {\n    parent = parent ? parent[i] = new Array(8) : tree._root = new Array(8);\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (deep = z >= (zm = (z0 + z1) / 2)) z0 = zm; else z1 = zm;\n  } while ((i = deep << 2 | bottom << 1 | right) === (j = (zp >= zm) << 2 | (yp >= ym) << 1 | (xp >= xm)));\n  return parent[j] = node, parent[i] = leaf, tree;\n}\n\nexport function addAll(data) {\n  var d, i, n = data.length,\n      x,\n      y,\n      z,\n      xz = new Array(n),\n      yz = new Array(n),\n      zz = new Array(n),\n      x0 = Infinity,\n      y0 = Infinity,\n      z0 = Infinity,\n      x1 = -Infinity,\n      y1 = -Infinity,\n      z1 = -Infinity;\n\n  // Compute the points and their extent.\n  for (i = 0; i < n; ++i) {\n    if (isNaN(x = +this._x.call(null, d = data[i])) || isNaN(y = +this._y.call(null, d)) || isNaN(z = +this._z.call(null, d))) continue;\n    xz[i] = x;\n    yz[i] = y;\n    zz[i] = z;\n    if (x < x0) x0 = x;\n    if (x > x1) x1 = x;\n    if (y < y0) y0 = y;\n    if (y > y1) y1 = y;\n    if (z < z0) z0 = z;\n    if (z > z1) z1 = z;\n  }\n\n  // If there were no (valid) points, inherit the existing extent.\n  if (x1 < x0) x0 = this._x0, x1 = this._x1;\n  if (y1 < y0) y0 = this._y0, y1 = this._y1;\n  if (z1 < z0) z0 = this._z0, z1 = this._z1;\n\n  // Expand the tree to cover the new points.\n  this.cover(x0, y0, z0).cover(x1, y1, z1);\n\n  // Add the new points.\n  for (i = 0; i < n; ++i) {\n    add(this, xz[i], yz[i], zz[i], data[i]);\n  }\n\n  return this;\n}\n","export default function(node, x0, y0, z0, x1, y1, z1) {\n  this.node = node;\n  this.x0 = x0;\n  this.y0 = y0;\n  this.z0 = z0;\n  this.x1 = x1;\n  this.y1 = y1;\n  this.z1 = z1;\n}\n","export function defaultX(d) {\n  return d[0];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._x = _, this) : this._x;\n}\n","export function defaultY(d) {\n  return d[1];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._y = _, this) : this._y;\n}\n","export function defaultZ(d) {\n  return d[2];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._z = _, this) : this._z;\n}\n","import tree_add, {addAll as tree_addAll} from \"./add\";\nimport tree_cover from \"./cover\";\nimport tree_data from \"./data\";\nimport tree_extent from \"./extent\";\nimport tree_find from \"./find\";\nimport tree_remove, {removeAll as tree_removeAll} from \"./remove\";\nimport tree_root from \"./root\";\nimport tree_size from \"./size\";\nimport tree_visit from \"./visit\";\nimport tree_visitAfter from \"./visitAfter\";\nimport tree_x, {defaultX} from \"./x\";\nimport tree_y, {defaultY} from \"./y\";\nimport tree_z, {defaultZ} from \"./z\";\n\nexport default function octree(nodes, x, y, z) {\n  var tree = new Octree(x == null ? defaultX : x, y == null ? defaultY : y, z == null ? defaultZ : z, NaN, NaN, NaN, NaN, NaN, NaN);\n  return nodes == null ? tree : tree.addAll(nodes);\n}\n\nfunction Octree(x, y, z, x0, y0, z0, x1, y1, z1) {\n  this._x = x;\n  this._y = y;\n  this._z = z;\n  this._x0 = x0;\n  this._y0 = y0;\n  this._z0 = z0;\n  this._x1 = x1;\n  this._y1 = y1;\n  this._z1 = z1;\n  this._root = undefined;\n}\n\nfunction leaf_copy(leaf) {\n  var copy = {data: leaf.data}, next = copy;\n  while (leaf = leaf.next) next = next.next = {data: leaf.data};\n  return copy;\n}\n\nvar treeProto = octree.prototype = Octree.prototype;\n\ntreeProto.copy = function() {\n  var copy = new Octree(this._x, this._y, this._z, this._x0, this._y0, this._z0, this._x1, this._y1, this._z1),\n      node = this._root,\n      nodes,\n      child;\n\n  if (!node) return copy;\n\n  if (!node.length) return copy._root = leaf_copy(node), copy;\n\n  nodes = [{source: node, target: copy._root = new Array(8)}];\n  while (node = nodes.pop()) {\n    for (var i = 0; i < 8; ++i) {\n      if (child = node.source[i]) {\n        if (child.length) nodes.push({source: child, target: node.target[i] = new Array(8)});\n        else node.target[i] = leaf_copy(child);\n      }\n    }\n  }\n\n  return copy;\n};\n\ntreeProto.add = tree_add;\ntreeProto.addAll = tree_addAll;\ntreeProto.cover = tree_cover;\ntreeProto.data = tree_data;\ntreeProto.extent = tree_extent;\ntreeProto.find = tree_find;\ntreeProto.remove = tree_remove;\ntreeProto.removeAll = tree_removeAll;\ntreeProto.root = tree_root;\ntreeProto.size = tree_size;\ntreeProto.visit = tree_visit;\ntreeProto.visitAfter = tree_visitAfter;\ntreeProto.x = tree_x;\ntreeProto.y = tree_y;\ntreeProto.z = tree_z;\n","export default function _isPlaceholder(a) {\n  return a != null && typeof a === 'object' && a['@@functional/placeholder'] === true;\n}","import _isPlaceholder from \"./_isPlaceholder.js\";\n\n/**\n * Optimized internal one-arity curry function.\n *\n * @private\n * @category Function\n * @param {Function} fn The function to curry.\n * @return {Function} The curried function.\n */\nexport default function _curry1(fn) {\n  return function f1(a) {\n    if (arguments.length === 0 || _isPlaceholder(a)) {\n      return f1;\n    } else {\n      return fn.apply(this, arguments);\n    }\n  };\n}","import _curry1 from \"./_curry1.js\";\nimport _isPlaceholder from \"./_isPlaceholder.js\";\n\n/**\n * Optimized internal two-arity curry function.\n *\n * @private\n * @category Function\n * @param {Function} fn The function to curry.\n * @return {Function} The curried function.\n */\nexport default function _curry2(fn) {\n  return function f2(a, b) {\n    switch (arguments.length) {\n      case 0:\n        return f2;\n      case 1:\n        return _isPlaceholder(a) ? f2 : _curry1(function (_b) {\n          return fn(a, _b);\n        });\n      default:\n        return _isPlaceholder(a) && _isPlaceholder(b) ? f2 : _isPlaceholder(a) ? _curry1(function (_a) {\n          return fn(_a, b);\n        }) : _isPlaceholder(b) ? _curry1(function (_b) {\n          return fn(a, _b);\n        }) : fn(a, b);\n    }\n  };\n}","export default function(x, y, z) {\n  if (isNaN(x = +x) || isNaN(y = +y) || isNaN(z = +z)) return this; // ignore invalid points\n\n  var x0 = this._x0,\n      y0 = this._y0,\n      z0 = this._z0,\n      x1 = this._x1,\n      y1 = this._y1,\n      z1 = this._z1;\n\n  // If the octree has no extent, initialize them.\n  // Integer extent are necessary so that if we later double the extent,\n  // the existing octant boundaries don’t change due to floating point error!\n  if (isNaN(x0)) {\n    x1 = (x0 = Math.floor(x)) + 1;\n    y1 = (y0 = Math.floor(y)) + 1;\n    z1 = (z0 = Math.floor(z)) + 1;\n  }\n\n  // Otherwise, double repeatedly to cover.\n  else if (x0 > x || x > x1 || y0 > y || y > y1 || z0 > z || z > z1) {\n    var t = x1 - x0,\n        node = this._root,\n        parent,\n        i;\n\n    switch (i = (z < (z0 + z1) / 2) << 2 | (y < (y0 + y1) / 2) << 1 | (x < (x0 + x1) / 2)) {\n      case 0: {\n        do parent = new Array(8), parent[i] = node, node = parent;\n        while (t *= 2, x1 = x0 + t, y1 = y0 + t, z1 = z0 + t, x > x1 || y > y1 || z > z1);\n        break;\n      }\n      case 1: {\n        do parent = new Array(8), parent[i] = node, node = parent;\n        while (t *= 2, x0 = x1 - t, y1 = y0 + t, z1 = z0 + t, x0 > x || y > y1 || z > z1);\n        break;\n      }\n      case 2: {\n        do parent = new Array(8), parent[i] = node, node = parent;\n        while (t *= 2, x1 = x0 + t, y0 = y1 - t, z1 = z0 + t, x > x1 || y0 > y || z > z1);\n        break;\n      }\n      case 3: {\n        do parent = new Array(8), parent[i] = node, node = parent;\n        while (t *= 2, x0 = x1 - t, y0 = y1 - t, z1 = z0 + t, x0 > x || y0 > y || z > z1);\n        break;\n      }\n      case 4: {\n        do parent = new Array(8), parent[i] = node, node = parent;\n        while (t *= 2, x1 = x0 + t, y1 = y0 + t, z0 = z1 - t, x > x1 || y > y1 || z0 > z);\n        break;\n      }\n      case 5: {\n        do parent = new Array(8), parent[i] = node, node = parent;\n        while (t *= 2, x0 = x1 - t, y1 = y0 + t, z0 = z1 - t, x0 > x || y > y1 || z0 > z);\n        break;\n      }\n      case 6: {\n        do parent = new Array(8), parent[i] = node, node = parent;\n        while (t *= 2, x1 = x0 + t, y0 = y1 - t, z0 = z1 - t, x > x1 || y0 > y || z0 > z);\n        break;\n      }\n      case 7: {\n        do parent = new Array(8), parent[i] = node, node = parent;\n        while (t *= 2, x0 = x1 - t, y0 = y1 - t, z0 = z1 - t, x0 > x || y0 > y || z0 > z);\n        break;\n      }\n    }\n\n    if (this._root && this._root.length) this._root = node;\n  }\n\n  // If the octree covers the point already, just return.\n  else return this;\n\n  this._x0 = x0;\n  this._y0 = y0;\n  this._z0 = z0;\n  this._x1 = x1;\n  this._y1 = y1;\n  this._z1 = z1;\n  return this;\n}\n","export default function() {\n  var data = [];\n  this.visit(function(node) {\n    if (!node.length) do data.push(node.data); while (node = node.next)\n  });\n  return data;\n}\n","export default function(_) {\n  return arguments.length\n      ? this.cover(+_[0][0], +_[0][1], +_[0][2]).cover(+_[1][0], +_[1][1], +_[1][2])\n      : isNaN(this._x0) ? undefined : [[this._x0, this._y0, this._z0], [this._x1, this._y1, this._z1]];\n}\n","import Octant from \"./octant\";\n\nexport default function(x, y, z, radius) {\n  var data,\n      x0 = this._x0,\n      y0 = this._y0,\n      z0 = this._z0,\n      x1,\n      y1,\n      z1,\n      x2,\n      y2,\n      z2,\n      x3 = this._x1,\n      y3 = this._y1,\n      z3 = this._z1,\n      octs = [],\n      node = this._root,\n      q,\n      i;\n\n  if (node) octs.push(new Octant(node, x0, y0, z0, x3, y3, z3));\n  if (radius == null) radius = Infinity;\n  else {\n    x0 = x - radius, y0 = y - radius, z0 = z - radius;\n    x3 = x + radius, y3 = y + radius, z3 = z + radius;\n    radius *= radius;\n  }\n\n  while (q = octs.pop()) {\n\n    // Stop searching if this octant can’t contain a closer node.\n    if (!(node = q.node)\n        || (x1 = q.x0) > x3\n        || (y1 = q.y0) > y3\n        || (z1 = q.z0) > z3\n        || (x2 = q.x1) < x0\n        || (y2 = q.y1) < y0\n        || (z2 = q.z1) < z0) continue;\n\n    // Bisect the current octant.\n    if (node.length) {\n      var xm = (x1 + x2) / 2,\n          ym = (y1 + y2) / 2,\n          zm = (z1 + z2) / 2;\n\n      octs.push(\n        new Octant(node[7], xm, ym, zm, x2, y2, z2),\n        new Octant(node[6], x1, ym, zm, xm, y2, z2),\n        new Octant(node[5], xm, y1, zm, x2, ym, z2),\n        new Octant(node[4], x1, y1, zm, xm, ym, z2),\n        new Octant(node[3], xm, ym, z1, x2, y2, zm),\n        new Octant(node[2], x1, ym, z1, xm, y2, zm),\n        new Octant(node[1], xm, y1, z1, x2, ym, zm),\n        new Octant(node[0], x1, y1, z1, xm, ym, zm)\n      );\n\n      // Visit the closest octant first.\n      if (i = (z >= zm) << 2 | (y >= ym) << 1 | (x >= xm)) {\n        q = octs[octs.length - 1];\n        octs[octs.length - 1] = octs[octs.length - 1 - i];\n        octs[octs.length - 1 - i] = q;\n      }\n    }\n\n    // Visit this point. (Visiting coincident points isn’t necessary!)\n    else {\n      var dx = x - +this._x.call(null, node.data),\n          dy = y - +this._y.call(null, node.data),\n          dz = z - +this._z.call(null, node.data),\n          d2 = dx * dx + dy * dy + dz * dz;\n      if (d2 < radius) {\n        var d = Math.sqrt(radius = d2);\n        x0 = x - d, y0 = y - d, z0 = z - d;\n        x3 = x + d, y3 = y + d, z3 = z + d;\n        data = node.data;\n      }\n    }\n  }\n\n  return data;\n}\n","export default function(d) {\n  if (isNaN(x = +this._x.call(null, d)) || isNaN(y = +this._y.call(null, d)) || isNaN(z = +this._z.call(null, d))) return this; // ignore invalid points\n\n  var parent,\n      node = this._root,\n      retainer,\n      previous,\n      next,\n      x0 = this._x0,\n      y0 = this._y0,\n      z0 = this._z0,\n      x1 = this._x1,\n      y1 = this._y1,\n      z1 = this._z1,\n      x,\n      y,\n      z,\n      xm,\n      ym,\n      zm,\n      right,\n      bottom,\n      deep,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return this;\n\n  // Find the leaf node for the point.\n  // While descending, also retain the deepest parent with a non-removed sibling.\n  if (node.length) while (true) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (deep = z >= (zm = (z0 + z1) / 2)) z0 = zm; else z1 = zm;\n    if (!(parent = node, node = node[i = deep << 2 | bottom << 1 | right])) return this;\n    if (!node.length) break;\n    if (parent[(i + 1) & 7] || parent[(i + 2) & 7] || parent[(i + 3) & 7] || parent[(i + 4) & 7] || parent[(i + 5) & 7] || parent[(i + 6) & 7] || parent[(i + 7) & 7]) retainer = parent, j = i;\n  }\n\n  // Find the point to remove.\n  while (node.data !== d) if (!(previous = node, node = node.next)) return this;\n  if (next = node.next) delete node.next;\n\n  // If there are multiple coincident points, remove just the point.\n  if (previous) return (next ? previous.next = next : delete previous.next), this;\n\n  // If this is the root point, remove it.\n  if (!parent) return this._root = next, this;\n\n  // Remove this leaf.\n  next ? parent[i] = next : delete parent[i];\n\n  // If the parent now contains exactly one leaf, collapse superfluous parents.\n  if ((node = parent[0] || parent[1] || parent[2] || parent[3] || parent[4] || parent[5] || parent[6] || parent[7])\n      && node === (parent[7] || parent[6] || parent[5] || parent[4] || parent[3] || parent[2] || parent[1] || parent[0])\n      && !node.length) {\n    if (retainer) retainer[j] = node;\n    else this._root = node;\n  }\n\n  return this;\n}\n\nexport function removeAll(data) {\n  for (var i = 0, n = data.length; i < n; ++i) this.remove(data[i]);\n  return this;\n}\n","export default function() {\n  return this._root;\n}\n","export default function() {\n  var size = 0;\n  this.visit(function(node) {\n    if (!node.length) do ++size; while (node = node.next)\n  });\n  return size;\n}\n","import Octant from \"./octant\";\n\nexport default function(callback) {\n  var octs = [], q, node = this._root, child, x0, y0, z0, x1, y1, z1;\n  if (node) octs.push(new Octant(node, this._x0, this._y0, this._z0, this._x1, this._y1, this._z1));\n  while (q = octs.pop()) {\n    if (!callback(node = q.node, x0 = q.x0, y0 = q.y0, z0 = q.z0, x1 = q.x1, y1 = q.y1, z1 = q.z1) && node.length) {\n      var xm = (x0 + x1) / 2, ym = (y0 + y1) / 2, zm = (z0 + z1) / 2;\n      if (child = node[7]) octs.push(new Octant(child, xm, ym, zm, x1, y1, z1));\n      if (child = node[6]) octs.push(new Octant(child, x0, ym, zm, xm, y1, z1));\n      if (child = node[5]) octs.push(new Octant(child, xm, y0, zm, x1, ym, z1));\n      if (child = node[4]) octs.push(new Octant(child, x0, y0, zm, xm, ym, z1));\n      if (child = node[3]) octs.push(new Octant(child, xm, ym, z0, x1, y1, zm));\n      if (child = node[2]) octs.push(new Octant(child, x0, ym, z0, xm, y1, zm));\n      if (child = node[1]) octs.push(new Octant(child, xm, y0, z0, x1, ym, zm));\n      if (child = node[0]) octs.push(new Octant(child, x0, y0, z0, xm, ym, zm));\n    }\n  }\n  return this;\n}\n","import Octant from \"./octant\";\n\nexport default function(callback) {\n  var octs = [], next = [], q;\n  if (this._root) octs.push(new Octant(this._root, this._x0, this._y0, this._z0, this._x1, this._y1, this._z1));\n  while (q = octs.pop()) {\n    var node = q.node;\n    if (node.length) {\n      var child, x0 = q.x0, y0 = q.y0, z0 = q.z0, x1 = q.x1, y1 = q.y1, z1 = q.z1, xm = (x0 + x1) / 2, ym = (y0 + y1) / 2, zm = (z0 + z1) / 2;\n      if (child = node[0]) octs.push(new Octant(child, x0, y0, z0, xm, ym, zm));\n      if (child = node[1]) octs.push(new Octant(child, xm, y0, z0, x1, ym, zm));\n      if (child = node[2]) octs.push(new Octant(child, x0, ym, z0, xm, y1, zm));\n      if (child = node[3]) octs.push(new Octant(child, xm, ym, z0, x1, y1, zm));\n      if (child = node[4]) octs.push(new Octant(child, x0, y0, zm, xm, ym, z1));\n      if (child = node[5]) octs.push(new Octant(child, xm, y0, zm, x1, ym, z1));\n      if (child = node[6]) octs.push(new Octant(child, x0, ym, zm, xm, y1, z1));\n      if (child = node[7]) octs.push(new Octant(child, xm, ym, zm, x1, y1, z1));\n    }\n    next.push(q);\n  }\n  while (q = next.pop()) {\n    callback(q.node, q.x0, q.y0, q.z0, q.x1, q.y1, q.z1);\n  }\n  return this;\n}\n","/**\n * Determine if the passed argument is an integer.\n *\n * @private\n * @param {*} n\n * @category Type\n * @return {Boolean}\n */\nexport default Number.isInteger || function _isInteger(n) {\n  return n << 0 === n;\n};","import _curry2 from \"./internal/_curry2.js\";\nimport _prop from \"./internal/_prop.js\";\n\n/**\n * Returns a function that when supplied an object returns the indicated\n * property of that object, if it exists.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category Object\n * @typedefn Idx = String | Int | Symbol\n * @sig Idx -> {s: a} -> a | Undefined\n * @param {String|Number} p The property name or array index\n * @param {Object} obj The object to query\n * @return {*} The value at `obj.p`.\n * @see R.path, R.props, R.pluck, R.project, R.nth\n * @example\n *\n *      R.prop('x', {x: 100}); //=> 100\n *      R.prop('x', {}); //=> undefined\n *      R.prop(0, [100]); //=> 100\n *      R.compose(R.inc, R.prop('x'))({ x: 3 }) //=> 4\n */\n\nvar prop = /*#__PURE__*/_curry2(_prop);\nexport default prop;","import _isInteger from \"./_isInteger.js\";\nimport _nth from \"./_nth.js\";\nfunction _prop(p, obj) {\n  if (obj == null) {\n    return;\n  }\n  return _isInteger(p) ? _nth(p, obj) : obj[p];\n}\nexport default _prop;","export default function _nth(offset, list) {\n  var idx = offset < 0 ? list.length + offset : offset;\n  return list[idx];\n}","/**\n * Tests whether or not an object is an array.\n *\n * @private\n * @param {*} val The object to test.\n * @return {Boolean} `true` if `val` is an array, `false` otherwise.\n * @example\n *\n *      _isArray([]); //=> true\n *      _isArray(null); //=> false\n *      _isArray({}); //=> false\n */\nexport default Array.isArray || function _isArray(val) {\n  return val != null && val.length >= 0 && Object.prototype.toString.call(val) === '[object Array]';\n};","import _isArray from \"./_isArray.js\";\n\n/**\n * This checks whether a function has a [methodname] function. If it isn't an\n * array it will execute that function otherwise it will default to the ramda\n * implementation.\n *\n * @private\n * @param {Function} fn ramda implementation\n * @param {String} methodname property to check for a custom implementation\n * @return {Object} Whatever the return value of the method is.\n */\nexport default function _checkForMethod(methodname, fn) {\n  return function () {\n    var length = arguments.length;\n    if (length === 0) {\n      return fn();\n    }\n    var obj = arguments[length - 1];\n    return _isArray(obj) || typeof obj[methodname] !== 'function' ? fn.apply(this, arguments) : obj[methodname].apply(obj, Array.prototype.slice.call(arguments, 0, length - 1));\n  };\n}","import _curry1 from \"./_curry1.js\";\nimport _curry2 from \"./_curry2.js\";\nimport _isPlaceholder from \"./_isPlaceholder.js\";\n\n/**\n * Optimized internal three-arity curry function.\n *\n * @private\n * @category Function\n * @param {Function} fn The function to curry.\n * @return {Function} The curried function.\n */\nexport default function _curry3(fn) {\n  return function f3(a, b, c) {\n    switch (arguments.length) {\n      case 0:\n        return f3;\n      case 1:\n        return _isPlaceholder(a) ? f3 : _curry2(function (_b, _c) {\n          return fn(a, _b, _c);\n        });\n      case 2:\n        return _isPlaceholder(a) && _isPlaceholder(b) ? f3 : _isPlaceholder(a) ? _curry2(function (_a, _c) {\n          return fn(_a, b, _c);\n        }) : _isPlaceholder(b) ? _curry2(function (_b, _c) {\n          return fn(a, _b, _c);\n        }) : _curry1(function (_c) {\n          return fn(a, b, _c);\n        });\n      default:\n        return _isPlaceholder(a) && _isPlaceholder(b) && _isPlaceholder(c) ? f3 : _isPlaceholder(a) && _isPlaceholder(b) ? _curry2(function (_a, _b) {\n          return fn(_a, _b, c);\n        }) : _isPlaceholder(a) && _isPlaceholder(c) ? _curry2(function (_a, _c) {\n          return fn(_a, b, _c);\n        }) : _isPlaceholder(b) && _isPlaceholder(c) ? _curry2(function (_b, _c) {\n          return fn(a, _b, _c);\n        }) : _isPlaceholder(a) ? _curry1(function (_a) {\n          return fn(_a, b, c);\n        }) : _isPlaceholder(b) ? _curry1(function (_b) {\n          return fn(a, _b, c);\n        }) : _isPlaceholder(c) ? _curry1(function (_c) {\n          return fn(a, b, _c);\n        }) : fn(a, b, c);\n    }\n  };\n}","import _checkForMethod from \"./internal/_checkForMethod.js\";\nimport _curry3 from \"./internal/_curry3.js\";\n\n/**\n * Returns the elements of the given list or string (or object with a `slice`\n * method) from `fromIndex` (inclusive) to `toIndex` (exclusive).\n *\n * Dispatches to the `slice` method of the third argument, if present.\n *\n * @func\n * @memberOf R\n * @since v0.1.4\n * @category List\n * @sig Number -> Number -> [a] -> [a]\n * @sig Number -> Number -> String -> String\n * @param {Number} fromIndex The start index (inclusive).\n * @param {Number} toIndex The end index (exclusive).\n * @param {*} list\n * @return {*}\n * @example\n *\n *      R.slice(1, 3, ['a', 'b', 'c', 'd']);        //=> ['b', 'c']\n *      R.slice(1, Infinity, ['a', 'b', 'c', 'd']); //=> ['b', 'c', 'd']\n *      R.slice(0, -1, ['a', 'b', 'c', 'd']);       //=> ['a', 'b', 'c']\n *      R.slice(-3, -1, ['a', 'b', 'c', 'd']);      //=> ['b', 'c']\n *      R.slice(0, 3, 'ramda');                     //=> 'ram'\n */\nvar slice = /*#__PURE__*/_curry3( /*#__PURE__*/_checkForMethod('slice', function slice(fromIndex, toIndex, list) {\n  return Array.prototype.slice.call(list, fromIndex, toIndex);\n}));\nexport default slice;","import _curry2 from \"./internal/_curry2.js\";\nimport slice from \"./slice.js\";\n\n/**\n * Splits a collection into slices of the specified length.\n *\n * @func\n * @memberOf R\n * @since v0.16.0\n * @category List\n * @sig Number -> [a] -> [[a]]\n * @sig Number -> String -> [String]\n * @param {Number} n\n * @param {Array} list\n * @return {Array}\n * @example\n *\n *      R.splitEvery(3, [1, 2, 3, 4, 5, 6, 7]); //=> [[1, 2, 3], [4, 5, 6], [7]]\n *      R.splitEvery(3, 'foobarbaz'); //=> ['foo', 'bar', 'baz']\n */\nvar splitEvery = /*#__PURE__*/_curry2(function splitEvery(n, list) {\n  if (n <= 0) {\n    throw new Error('First argument to splitEvery must be a positive integer');\n  }\n  var result = [];\n  var idx = 0;\n  while (idx < list.length) {\n    result.push(slice(idx, idx += n, list));\n  }\n  return result;\n});\nexport default splitEvery;","import {SimplePoint} from 'types'\n\nconst sqrt = Math.sqrt\nconst pow2 = (num: number) => num * num\n\nexport const pointDistance = (p1: SimplePoint, p2: SimplePoint) =>\n  sqrt(pow2(p1.x - p2.x) + pow2(p1.y - p2.y) + pow2(p1.z - p2.z))\n","import {Point} from 'types'\n\nlet counter = 1\n\nexport const createPoint = (x: number, y: number, z: number): Point =>\n  // tslint:disable-next-line:prefer-template\n  ({id: counter++, x, y, z})\n","import {\n  Point,\n  Space3d,\n} from 'types'\nimport {createPoint} from './create-point'\n\nconst random = Math.random\nconst floor = Math.floor\n\nexport const getRandomPoint = (space: Space3d): Point => {\n  const ranX = floor(random() * space.lenx)\n  const ranY = floor(random() * space.leny)\n  const ranZ = floor(random() * space.lenz)\n\n  return createPoint(ranX, ranY, ranZ)\n}\n","import {\n  SimplePoint,\n  Sphere,\n} from 'types'\nimport {pointDistance} from './point-distance'\n\nexport const sphereContains = (s: Sphere, coord: SimplePoint) => pointDistance(s.coord, coord) <= s.r\n","import {SimplePoint} from 'types'\n\nexport const addSimplePoints = (p1: SimplePoint, p2: SimplePoint): SimplePoint => {\n  return {\n    x: p1.x + p2.x,\n    y: p1.y + p2.y,\n    z: p1.z + p2.z,\n  }\n}\n","import {SimplePoint} from 'types'\n\nexport const multiplySimplePoint = (n: number, p: SimplePoint): SimplePoint =>\n  ({x: p.x * n, y: p.y * n, z: p.z * n})\n","export default function _has(prop, obj) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}","import _has from \"./_has.js\";\nvar toString = Object.prototype.toString;\nvar _isArguments = /*#__PURE__*/function () {\n  return toString.call(arguments) === '[object Arguments]' ? function _isArguments(x) {\n    return toString.call(x) === '[object Arguments]';\n  } : function _isArguments(x) {\n    return _has('callee', x);\n  };\n}();\nexport default _isArguments;","import _curry1 from \"./internal/_curry1.js\";\nimport _has from \"./internal/_has.js\";\nimport _isArguments from \"./internal/_isArguments.js\";\n\n// cover IE < 9 keys issues\nvar hasEnumBug = ! /*#__PURE__*/{\n  toString: null\n}.propertyIsEnumerable('toString');\nvar nonEnumerableProps = ['constructor', 'valueOf', 'isPrototypeOf', 'toString', 'propertyIsEnumerable', 'hasOwnProperty', 'toLocaleString'];\n// Safari bug\nvar hasArgsEnumBug = /*#__PURE__*/function () {\n  'use strict';\n\n  return arguments.propertyIsEnumerable('length');\n}();\nvar contains = function contains(list, item) {\n  var idx = 0;\n  while (idx < list.length) {\n    if (list[idx] === item) {\n      return true;\n    }\n    idx += 1;\n  }\n  return false;\n};\n\n/**\n * Returns a list containing the names of all the enumerable own properties of\n * the supplied object.\n * Note that the order of the output array is not guaranteed to be consistent\n * across different JS platforms.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category Object\n * @sig {k: v} -> [k]\n * @param {Object} obj The object to extract properties from\n * @return {Array} An array of the object's own properties.\n * @see R.keysIn, R.values, R.toPairs\n * @example\n *\n *      R.keys({a: 1, b: 2, c: 3}); //=> ['a', 'b', 'c']\n */\nvar keys = typeof Object.keys === 'function' && !hasArgsEnumBug ? /*#__PURE__*/_curry1(function keys(obj) {\n  return Object(obj) !== obj ? [] : Object.keys(obj);\n}) : /*#__PURE__*/_curry1(function keys(obj) {\n  if (Object(obj) !== obj) {\n    return [];\n  }\n  var prop, nIdx;\n  var ks = [];\n  var checkArgsLength = hasArgsEnumBug && _isArguments(obj);\n  for (prop in obj) {\n    if (_has(prop, obj) && (!checkArgsLength || prop !== 'length')) {\n      ks[ks.length] = prop;\n    }\n  }\n  if (hasEnumBug) {\n    nIdx = nonEnumerableProps.length - 1;\n    while (nIdx >= 0) {\n      prop = nonEnumerableProps[nIdx];\n      if (_has(prop, obj) && !contains(ks, prop)) {\n        ks[ks.length] = prop;\n      }\n      nIdx -= 1;\n    }\n  }\n  return ks;\n});\nexport default keys;","import Rkeys from 'ramda/es/keys'\nimport {\n  CorePoints,\n  Dict,\n  Point,\n} from 'types'\n\nexport const dbScan = (corePoints: CorePoints) => {\n  const visited: Dict<boolean> = {}\n  const clusters = new Map<Point, Point[]>()\n\n  const isCore = (point: Point) => corePoints[point.id]\n  const isVisited = (point: Point) => visited[point.id]\n  const isNotVisited = (point: Point) => !visited[point.id]\n  const addToVisited = (point: Point) => visited[point.id] = true\n\n  const expandCore = (corePointId: number, cluster: Point[]) => {\n    const neighbors = corePoints[corePointId].neighbors!.filter(isNotVisited)\n    for (const neighbor of neighbors) addToVisited(neighbor)\n    cluster.push(...neighbors)\n    const neighborCores = neighbors.filter(isCore)\n    for (const neighborCore of neighborCores)\n      expandCore(neighborCore.id, cluster)\n  }\n\n  for (const corePointId of Rkeys(corePoints)) {\n    const corePoint = corePoints[corePointId].core\n    if (isVisited(corePoint)) continue\n    addToVisited(corePoint)\n    const cluster = [corePoint]\n    expandCore(corePointId, cluster)\n    clusters.set(corePoint, cluster)\n  }\n\n  return clusters\n}\n","import {Octree} from 'd3-octree'\nimport Rpick from 'ramda/es/pick'\nimport {\n  Point,\n  SerializedTree,\n} from 'types'\n\nexport const serializeTree: (tree: Octree<Point>) => SerializedTree =\n  Rpick(['_x0', '_y0', '_z0', '_x1', '_y1', '_z1', '_root'])\n","import _curry2 from \"./internal/_curry2.js\";\n\n/**\n * Returns a partial copy of an object containing only the keys specified. If\n * the key does not exist, the property is ignored.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category Object\n * @sig [k] -> {k: v} -> {k: v}\n * @param {Array} names an array of String property names to copy onto a new object\n * @param {Object} obj The object to copy from\n * @return {Object} A new object with only properties from `names` on it.\n * @see R.omit, R.props\n * @example\n *\n *      R.pick(['a', 'd'], {a: 1, b: 2, c: 3, d: 4}); //=> {a: 1, d: 4}\n *      R.pick(['a', 'e', 'f'], {a: 1, b: 2, c: 3, d: 4}); //=> {a: 1}\n */\nvar pick = /*#__PURE__*/_curry2(function pick(names, obj) {\n  var result = {};\n  var idx = 0;\n  while (idx < names.length) {\n    if (names[idx] in obj) {\n      result[names[idx]] = obj[names[idx]];\n    }\n    idx += 1;\n  }\n  return result;\n});\nexport default pick;","import _isArray from \"./_isArray.js\";\nimport _isTransformer from \"./_isTransformer.js\";\n\n/**\n * Returns a function that dispatches with different strategies based on the\n * object in list position (last argument). If it is an array, executes [fn].\n * Otherwise, if it has a function with one of the given method names, it will\n * execute that function (functor case). Otherwise, if it is a transformer,\n * uses transducer created by [transducerCreator] to return a new transformer\n * (transducer case).\n * Otherwise, it will default to executing [fn].\n *\n * @private\n * @param {Array} methodNames properties to check for a custom implementation\n * @param {Function} transducerCreator transducer factory if object is transformer\n * @param {Function} fn default ramda implementation\n * @return {Function} A function that dispatches on object in list position\n */\nexport default function _dispatchable(methodNames, transducerCreator, fn) {\n  return function () {\n    if (arguments.length === 0) {\n      return fn();\n    }\n    var obj = arguments[arguments.length - 1];\n    if (!_isArray(obj)) {\n      var idx = 0;\n      while (idx < methodNames.length) {\n        if (typeof obj[methodNames[idx]] === 'function') {\n          return obj[methodNames[idx]].apply(obj, Array.prototype.slice.call(arguments, 0, -1));\n        }\n        idx += 1;\n      }\n      if (_isTransformer(obj)) {\n        var transducer = transducerCreator.apply(null, Array.prototype.slice.call(arguments, 0, -1));\n        return transducer(obj);\n      }\n    }\n    return fn.apply(this, arguments);\n  };\n}","export default function _isTransformer(obj) {\n  return obj != null && typeof obj['@@transducer/step'] === 'function';\n}","import _curry1 from \"./_curry1.js\";\nimport _isArray from \"./_isArray.js\";\nimport _isString from \"./_isString.js\";\n\n/**\n * Tests whether or not an object is similar to an array.\n *\n * @private\n * @category Type\n * @category List\n * @sig * -> Boolean\n * @param {*} x The object to test.\n * @return {Boolean} `true` if `x` has a numeric length property and extreme indices defined; `false` otherwise.\n * @example\n *\n *      _isArrayLike([]); //=> true\n *      _isArrayLike(true); //=> false\n *      _isArrayLike({}); //=> false\n *      _isArrayLike({length: 10}); //=> false\n *      _isArrayLike({0: 'zero', 9: 'nine', length: 10}); //=> true\n *      _isArrayLike({nodeType: 1, length: 1}) // => false\n */\nvar _isArrayLike = /*#__PURE__*/_curry1(function isArrayLike(x) {\n  if (_isArray(x)) {\n    return true;\n  }\n  if (!x) {\n    return false;\n  }\n  if (typeof x !== 'object') {\n    return false;\n  }\n  if (_isString(x)) {\n    return false;\n  }\n  if (x.length === 0) {\n    return true;\n  }\n  if (x.length > 0) {\n    return x.hasOwnProperty(0) && x.hasOwnProperty(x.length - 1);\n  }\n  return false;\n});\nexport default _isArrayLike;","export default function _isString(x) {\n  return Object.prototype.toString.call(x) === '[object String]';\n}","export default function _xArrayReduce(xf, acc, list) {\n  var idx = 0;\n  var len = list.length;\n  while (idx < len) {\n    acc = xf['@@transducer/step'](acc, list[idx]);\n    if (acc && acc['@@transducer/reduced']) {\n      acc = acc['@@transducer/value'];\n      break;\n    }\n    idx += 1;\n  }\n  return xf['@@transducer/result'](acc);\n}","import _isArrayLike from \"./_isArrayLike.js\";\nvar symIterator = typeof Symbol !== 'undefined' ? Symbol.iterator : '@@iterator';\nexport default function _createReduce(arrayReduce, methodReduce, iterableReduce) {\n  return function _reduce(xf, acc, list) {\n    if (_isArrayLike(list)) {\n      return arrayReduce(xf, acc, list);\n    }\n    if (list == null) {\n      return acc;\n    }\n    if (typeof list['fantasy-land/reduce'] === 'function') {\n      return methodReduce(xf, acc, list, 'fantasy-land/reduce');\n    }\n    if (list[symIterator] != null) {\n      return iterableReduce(xf, acc, list[symIterator]());\n    }\n    if (typeof list.next === 'function') {\n      return iterableReduce(xf, acc, list);\n    }\n    if (typeof list.reduce === 'function') {\n      return methodReduce(xf, acc, list, 'reduce');\n    }\n    throw new TypeError('reduce: list must be array or iterable');\n  };\n}","export default function _arity(n, fn) {\n  /* eslint-disable no-unused-vars */\n  switch (n) {\n    case 0:\n      return function () {\n        return fn.apply(this, arguments);\n      };\n    case 1:\n      return function (a0) {\n        return fn.apply(this, arguments);\n      };\n    case 2:\n      return function (a0, a1) {\n        return fn.apply(this, arguments);\n      };\n    case 3:\n      return function (a0, a1, a2) {\n        return fn.apply(this, arguments);\n      };\n    case 4:\n      return function (a0, a1, a2, a3) {\n        return fn.apply(this, arguments);\n      };\n    case 5:\n      return function (a0, a1, a2, a3, a4) {\n        return fn.apply(this, arguments);\n      };\n    case 6:\n      return function (a0, a1, a2, a3, a4, a5) {\n        return fn.apply(this, arguments);\n      };\n    case 7:\n      return function (a0, a1, a2, a3, a4, a5, a6) {\n        return fn.apply(this, arguments);\n      };\n    case 8:\n      return function (a0, a1, a2, a3, a4, a5, a6, a7) {\n        return fn.apply(this, arguments);\n      };\n    case 9:\n      return function (a0, a1, a2, a3, a4, a5, a6, a7, a8) {\n        return fn.apply(this, arguments);\n      };\n    case 10:\n      return function (a0, a1, a2, a3, a4, a5, a6, a7, a8, a9) {\n        return fn.apply(this, arguments);\n      };\n    default:\n      throw new Error('First argument to _arity must be a non-negative integer no greater than ten');\n  }\n}","import _arity from \"./internal/_arity.js\";\nimport _curry2 from \"./internal/_curry2.js\";\n\n/**\n * Creates a function that is bound to a context.\n * Note: `R.bind` does not provide the additional argument-binding capabilities of\n * [Function.prototype.bind](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind).\n *\n * @func\n * @memberOf R\n * @since v0.6.0\n * @category Function\n * @category Object\n * @sig (* -> *) -> {*} -> (* -> *)\n * @param {Function} fn The function to bind to context\n * @param {Object} thisObj The context to bind `fn` to\n * @return {Function} A function that will execute in the context of `thisObj`.\n * @see R.partial\n * @example\n *\n *      const log = R.bind(console.log, console);\n *      R.pipe(R.assoc('a', 2), R.tap(log), R.assoc('a', 3))({a: 1}); //=> {a: 3}\n *      // logs {a: 2}\n * @symb R.bind(f, o)(a, b) = f.call(o, a, b)\n */\nvar bind = /*#__PURE__*/_curry2(function bind(fn, thisObj) {\n  return _arity(fn.length, function () {\n    return fn.apply(thisObj, arguments);\n  });\n});\nexport default bind;","import _createReduce from \"./_createReduce.js\";\nimport _xArrayReduce from \"./_xArrayReduce.js\";\nimport bind from \"../bind.js\";\nfunction _xIterableReduce(xf, acc, iter) {\n  var step = iter.next();\n  while (!step.done) {\n    acc = xf['@@transducer/step'](acc, step.value);\n    if (acc && acc['@@transducer/reduced']) {\n      acc = acc['@@transducer/value'];\n      break;\n    }\n    step = iter.next();\n  }\n  return xf['@@transducer/result'](acc);\n}\nfunction _xMethodReduce(xf, acc, obj, methodName) {\n  return xf['@@transducer/result'](obj[methodName](bind(xf['@@transducer/step'], xf), acc));\n}\nvar _xReduce = /*#__PURE__*/_createReduce(_xArrayReduce, _xMethodReduce, _xIterableReduce);\nexport default _xReduce;","export default {\n  init: function () {\n    return this.xf['@@transducer/init']();\n  },\n  result: function (result) {\n    return this.xf['@@transducer/result'](result);\n  }\n};","import _forceReduced from \"./_forceReduced.js\";\nimport _isArrayLike from \"./_isArrayLike.js\";\nimport _xArrayReduce from \"./_xArrayReduce.js\";\nimport _xReduce from \"./_xReduce.js\";\nimport _xfBase from \"./_xfBase.js\";\nvar tInit = '@@transducer/init';\nvar tStep = '@@transducer/step';\nvar tResult = '@@transducer/result';\nvar XPreservingReduced = /*#__PURE__*/function () {\n  function XPreservingReduced(xf) {\n    this.xf = xf;\n  }\n  XPreservingReduced.prototype[tInit] = _xfBase.init;\n  XPreservingReduced.prototype[tResult] = _xfBase.result;\n  XPreservingReduced.prototype[tStep] = function (result, input) {\n    var ret = this.xf[tStep](result, input);\n    return ret['@@transducer/reduced'] ? _forceReduced(ret) : ret;\n  };\n  return XPreservingReduced;\n}();\nvar XFlatCat = /*#__PURE__*/function () {\n  function XFlatCat(xf) {\n    this.xf = new XPreservingReduced(xf);\n  }\n  XFlatCat.prototype[tInit] = _xfBase.init;\n  XFlatCat.prototype[tResult] = _xfBase.result;\n  XFlatCat.prototype[tStep] = function (result, input) {\n    return !_isArrayLike(input) ? _xArrayReduce(this.xf, result, [input]) : _xReduce(this.xf, result, input);\n  };\n  return XFlatCat;\n}();\nvar _flatCat = function _xcat(xf) {\n  return new XFlatCat(xf);\n};\nexport default _flatCat;","export default function _forceReduced(x) {\n  return {\n    '@@transducer/value': x,\n    '@@transducer/reduced': true\n  };\n}","import _xfBase from \"./_xfBase.js\";\nvar XMap = /*#__PURE__*/function () {\n  function XMap(f, xf) {\n    this.xf = xf;\n    this.f = f;\n  }\n  XMap.prototype['@@transducer/init'] = _xfBase.init;\n  XMap.prototype['@@transducer/result'] = _xfBase.result;\n  XMap.prototype['@@transducer/step'] = function (result, input) {\n    return this.xf['@@transducer/step'](result, this.f(input));\n  };\n  return XMap;\n}();\nvar _xmap = function _xmap(f) {\n  return function (xf) {\n    return new XMap(f, xf);\n  };\n};\nexport default _xmap;","import _flatCat from \"./_flatCat.js\";\nimport _xmap from \"./_xmap.js\";\nexport default function _xchain(f) {\n  return function (xf) {\n    return _xmap(f)(_flatCat(xf));\n  };\n}","import _arity from \"./_arity.js\";\nimport _isPlaceholder from \"./_isPlaceholder.js\";\n\n/**\n * Internal curryN function.\n *\n * @private\n * @category Function\n * @param {Number} length The arity of the curried function.\n * @param {Array} received An array of arguments received thus far.\n * @param {Function} fn The function to curry.\n * @return {Function} The curried function.\n */\nexport default function _curryN(length, received, fn) {\n  return function () {\n    var combined = [];\n    var argsIdx = 0;\n    var left = length;\n    var combinedIdx = 0;\n    var hasPlaceholder = false;\n    while (combinedIdx < received.length || argsIdx < arguments.length) {\n      var result;\n      if (combinedIdx < received.length && (!_isPlaceholder(received[combinedIdx]) || argsIdx >= arguments.length)) {\n        result = received[combinedIdx];\n      } else {\n        result = arguments[argsIdx];\n        argsIdx += 1;\n      }\n      combined[combinedIdx] = result;\n      if (!_isPlaceholder(result)) {\n        left -= 1;\n      } else {\n        hasPlaceholder = true;\n      }\n      combinedIdx += 1;\n    }\n    return !hasPlaceholder && left <= 0 ? fn.apply(this, combined) : _arity(Math.max(0, left), _curryN(length, combined, fn));\n  };\n}","import _arity from \"./internal/_arity.js\";\nimport _curry1 from \"./internal/_curry1.js\";\nimport _curry2 from \"./internal/_curry2.js\";\nimport _curryN from \"./internal/_curryN.js\";\n\n/**\n * Returns a curried equivalent of the provided function, with the specified\n * arity. The curried function has two unusual capabilities. First, its\n * arguments needn't be provided one at a time. If `g` is `R.curryN(3, f)`, the\n * following are equivalent:\n *\n *   - `g(1)(2)(3)`\n *   - `g(1)(2, 3)`\n *   - `g(1, 2)(3)`\n *   - `g(1, 2, 3)`\n *\n * Secondly, the special placeholder value [`R.__`](#__) may be used to specify\n * \"gaps\", allowing partial application of any combination of arguments,\n * regardless of their positions. If `g` is as above and `_` is [`R.__`](#__),\n * the following are equivalent:\n *\n *   - `g(1, 2, 3)`\n *   - `g(_, 2, 3)(1)`\n *   - `g(_, _, 3)(1)(2)`\n *   - `g(_, _, 3)(1, 2)`\n *   - `g(_, 2)(1)(3)`\n *   - `g(_, 2)(1, 3)`\n *   - `g(_, 2)(_, 3)(1)`\n *\n * @func\n * @memberOf R\n * @since v0.5.0\n * @category Function\n * @sig Number -> (* -> a) -> (* -> a)\n * @param {Number} length The arity for the returned function.\n * @param {Function} fn The function to curry.\n * @return {Function} A new, curried function.\n * @see R.curry\n * @example\n *\n *      const sumArgs = (...args) => R.sum(args);\n *\n *      const curriedAddFourNumbers = R.curryN(4, sumArgs);\n *      const f = curriedAddFourNumbers(1, 2);\n *      const g = f(3);\n *      g(4); //=> 10\n */\nvar curryN = /*#__PURE__*/_curry2(function curryN(length, fn) {\n  if (length === 1) {\n    return _curry1(fn);\n  }\n  return _arity(length, _curryN(length, [], fn));\n});\nexport default curryN;","import _arrayReduce from \"./internal/_arrayReduce.js\";\nimport _curry2 from \"./internal/_curry2.js\";\nimport _dispatchable from \"./internal/_dispatchable.js\";\nimport _map from \"./internal/_map.js\";\nimport _xmap from \"./internal/_xmap.js\";\nimport curryN from \"./curryN.js\";\nimport keys from \"./keys.js\";\n\n/**\n * Takes a function and\n * a [functor](https://github.com/fantasyland/fantasy-land#functor),\n * applies the function to each of the functor's values, and returns\n * a functor of the same shape.\n *\n * Ramda provides suitable `map` implementations for `Array` and `Object`,\n * so this function may be applied to `[1, 2, 3]` or `{x: 1, y: 2, z: 3}`.\n *\n * Dispatches to the `map` method of the second argument, if present.\n *\n * Acts as a transducer if a transformer is given in list position.\n *\n * Also treats functions as functors and will compose them together.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category List\n * @sig Functor f => (a -> b) -> f a -> f b\n * @param {Function} fn The function to be called on every element of the input `list`.\n * @param {Array} list The list to be iterated over.\n * @return {Array} The new list.\n * @see R.transduce, R.addIndex, R.pluck, R.project\n * @example\n *\n *      const double = x => x * 2;\n *\n *      R.map(double, [1, 2, 3]); //=> [2, 4, 6]\n *\n *      R.map(double, {x: 1, y: 2, z: 3}); //=> {x: 2, y: 4, z: 6}\n * @symb R.map(f, [a, b]) = [f(a), f(b)]\n * @symb R.map(f, { x: a, y: b }) = { x: f(a), y: f(b) }\n * @symb R.map(f, functor_o) = functor_o.map(f)\n */\nvar map = /*#__PURE__*/_curry2( /*#__PURE__*/_dispatchable(['fantasy-land/map', 'map'], _xmap, function map(fn, functor) {\n  switch (Object.prototype.toString.call(functor)) {\n    case '[object Function]':\n      return curryN(functor.length, function () {\n        return fn.call(this, functor.apply(this, arguments));\n      });\n    case '[object Object]':\n      return _arrayReduce(function (acc, key) {\n        acc[key] = fn(functor[key]);\n        return acc;\n      }, {}, keys(functor));\n    default:\n      return _map(fn, functor);\n  }\n}));\nexport default map;","export default function _arrayReduce(reducer, acc, list) {\n  var index = 0;\n  var length = list.length;\n  while (index < length) {\n    acc = reducer(acc, list[index]);\n    index += 1;\n  }\n  return acc;\n}","export default function _map(fn, functor) {\n  var idx = 0;\n  var len = functor.length;\n  var result = Array(len);\n  while (idx < len) {\n    result[idx] = fn(functor[idx]);\n    idx += 1;\n  }\n  return result;\n}","import _curry2 from \"./internal/_curry2.js\";\nimport _chain from \"./internal/_chain.js\";\n\n/**\n * `chain` maps a function over a list and concatenates the results. `chain`\n * is also known as `flatMap` in some libraries.\n *\n * Dispatches to the `chain` method of the second argument, if present,\n * according to the [FantasyLand Chain spec](https://github.com/fantasyland/fantasy-land#chain).\n *\n * If second argument is a function, `chain(f, g)(x)` is equivalent to `f(g(x), x)`.\n *\n * Acts as a transducer if a transformer is given in list position.\n *\n * @func\n * @memberOf R\n * @since v0.3.0\n * @category List\n * @sig Chain m => (a -> m b) -> m a -> m b\n * @param {Function} fn The function to map with\n * @param {Array} list The list to map over\n * @return {Array} The result of flat-mapping `list` with `fn`\n * @example\n *\n *      const duplicate = n => [n, n];\n *      R.chain(duplicate, [1, 2, 3]); //=> [1, 1, 2, 2, 3, 3]\n *\n *      R.chain(R.append, R.head)([1, 2, 3]); //=> [1, 2, 3, 1]\n */\nvar chain = /*#__PURE__*/_curry2(_chain);\nexport default chain;","import _dispatchable from \"./_dispatchable.js\";\nimport _makeFlat from \"./_makeFlat.js\";\nimport _xchain from \"./_xchain.js\";\nimport map from \"../map.js\";\nexport default /*#__PURE__*/_dispatchable(['fantasy-land/chain', 'chain'], _xchain, function chain(fn, monad) {\n  if (typeof monad === 'function') {\n    return function (x) {\n      return fn(monad(x))(x);\n    };\n  }\n  return _makeFlat(false)(map(fn, monad));\n});","import _isArrayLike from \"./_isArrayLike.js\";\n\n/**\n * `_makeFlat` is a helper function that returns a one-level or fully recursive\n * function based on the flag passed in.\n *\n * @private\n */\nexport default function _makeFlat(recursive) {\n  return function flatt(list) {\n    var value, jlen, j;\n    var result = [];\n    var idx = 0;\n    var ilen = list.length;\n    while (idx < ilen) {\n      if (_isArrayLike(list[idx])) {\n        value = recursive ? flatt(list[idx]) : list[idx];\n        j = 0;\n        jlen = value.length;\n        while (j < jlen) {\n          result[result.length] = value[j];\n          j += 1;\n        }\n      } else {\n        result[result.length] = list[idx];\n      }\n      idx += 1;\n    }\n    return result;\n  };\n}","import _curry1 from \"./internal/_curry1.js\";\n\n/**\n * Gives a single-word string description of the (native) type of a value,\n * returning such answers as 'Object', 'Number', 'Array', or 'Null'. Does not\n * attempt to distinguish user Object types any further, reporting them all as\n * 'Object'.\n *\n * @func\n * @memberOf R\n * @since v0.8.0\n * @category Type\n * @sig * -> String\n * @param {*} val The value to test\n * @return {String}\n * @example\n *\n *      R.type({}); //=> \"Object\"\n *      R.type(1); //=> \"Number\"\n *      R.type(false); //=> \"Boolean\"\n *      R.type('s'); //=> \"String\"\n *      R.type(null); //=> \"Null\"\n *      R.type([]); //=> \"Array\"\n *      R.type(/[A-z]/); //=> \"RegExp\"\n *      R.type(() => {}); //=> \"Function\"\n *      R.type(async () => {}); //=> \"AsyncFunction\"\n *      R.type(undefined); //=> \"Undefined\"\n *      R.type(BigInt(123)); //=> \"BigInt\"\n */\nvar type = /*#__PURE__*/_curry1(function type(val) {\n  return val === null ? 'Null' : val === undefined ? 'Undefined' : Object.prototype.toString.call(val).slice(8, -1);\n});\nexport default type;","import _cloneRegExp from \"./_cloneRegExp.js\";\nimport type from \"../type.js\";\n\n/**\n * Copies an object.\n *\n * @private\n * @param {*} value The value to be copied\n * @param {Boolean} deep Whether or not to perform deep cloning.\n * @return {*} The copied value.\n */\nexport default function _clone(value, deep, map) {\n  map || (map = new _ObjectMap());\n\n  // this avoids the slower switch with a quick if decision removing some milliseconds in each run.\n  if (_isPrimitive(value)) {\n    return value;\n  }\n  var copy = function copy(copiedValue) {\n    // Check for circular and same references on the object graph and return its corresponding clone.\n    var cachedCopy = map.get(value);\n    if (cachedCopy) {\n      return cachedCopy;\n    }\n    map.set(value, copiedValue);\n    for (var key in value) {\n      if (Object.prototype.hasOwnProperty.call(value, key)) {\n        copiedValue[key] = deep ? _clone(value[key], true, map) : value[key];\n      }\n    }\n    return copiedValue;\n  };\n  switch (type(value)) {\n    case 'Object':\n      return copy(Object.create(Object.getPrototypeOf(value)));\n    case 'Array':\n      return copy(Array(value.length));\n    case 'Date':\n      return new Date(value.valueOf());\n    case 'RegExp':\n      return _cloneRegExp(value);\n    case 'Int8Array':\n    case 'Uint8Array':\n    case 'Uint8ClampedArray':\n    case 'Int16Array':\n    case 'Uint16Array':\n    case 'Int32Array':\n    case 'Uint32Array':\n    case 'Float32Array':\n    case 'Float64Array':\n    case 'BigInt64Array':\n    case 'BigUint64Array':\n      return value.slice();\n    default:\n      return value;\n  }\n}\nfunction _isPrimitive(param) {\n  var type = typeof param;\n  return param == null || type != 'object' && type != 'function';\n}\nvar _ObjectMap = /*#__PURE__*/function () {\n  function _ObjectMap() {\n    this.map = {};\n    this.length = 0;\n  }\n  _ObjectMap.prototype.set = function (key, value) {\n    var hashedKey = this.hash(key);\n    var bucket = this.map[hashedKey];\n    if (!bucket) {\n      this.map[hashedKey] = bucket = [];\n    }\n    bucket.push([key, value]);\n    this.length += 1;\n  };\n  _ObjectMap.prototype.hash = function (key) {\n    var hashedKey = [];\n    for (var value in key) {\n      hashedKey.push(Object.prototype.toString.call(key[value]));\n    }\n    return hashedKey.join();\n  };\n  _ObjectMap.prototype.get = function (key) {\n    /**\n     * depending on the number of objects to be cloned is faster to just iterate over the items in the map just because the hash function is so costly,\n     * on my tests this number is 180, anything above that using the hash function is faster.\n     */\n    if (this.length <= 180) {\n      for (var p in this.map) {\n        var bucket = this.map[p];\n        for (var i = 0; i < bucket.length; i += 1) {\n          var element = bucket[i];\n          if (element[0] === key) {\n            return element[1];\n          }\n        }\n      }\n      return;\n    }\n    var hashedKey = this.hash(key);\n    var bucket = this.map[hashedKey];\n    if (!bucket) {\n      return;\n    }\n    for (var i = 0; i < bucket.length; i += 1) {\n      var element = bucket[i];\n      if (element[0] === key) {\n        return element[1];\n      }\n    }\n  };\n  return _ObjectMap;\n}();","export default function _cloneRegExp(pattern) {\n  return new RegExp(pattern.source, pattern.flags ? pattern.flags : (pattern.global ? 'g' : '') + (pattern.ignoreCase ? 'i' : '') + (pattern.multiline ? 'm' : '') + (pattern.sticky ? 'y' : '') + (pattern.unicode ? 'u' : '') + (pattern.dotAll ? 's' : ''));\n}","import _clone from \"./_clone.js\";\nimport _has from \"./_has.js\";\nimport _xfBase from \"./_xfBase.js\";\nvar XReduceBy = /*#__PURE__*/function () {\n  function XReduceBy(valueFn, valueAcc, keyFn, xf) {\n    this.valueFn = valueFn;\n    this.valueAcc = valueAcc;\n    this.keyFn = keyFn;\n    this.xf = xf;\n    this.inputs = {};\n  }\n  XReduceBy.prototype['@@transducer/init'] = _xfBase.init;\n  XReduceBy.prototype['@@transducer/result'] = function (result) {\n    var key;\n    for (key in this.inputs) {\n      if (_has(key, this.inputs)) {\n        result = this.xf['@@transducer/step'](result, this.inputs[key]);\n        if (result['@@transducer/reduced']) {\n          result = result['@@transducer/value'];\n          break;\n        }\n      }\n    }\n    this.inputs = null;\n    return this.xf['@@transducer/result'](result);\n  };\n  XReduceBy.prototype['@@transducer/step'] = function (result, input) {\n    var key = this.keyFn(input);\n    this.inputs[key] = this.inputs[key] || [key, _clone(this.valueAcc, false)];\n    this.inputs[key][1] = this.valueFn(this.inputs[key][1], input);\n    return result;\n  };\n  return XReduceBy;\n}();\nexport default function _xreduceBy(valueFn, valueAcc, keyFn) {\n  return function (xf) {\n    return new XReduceBy(valueFn, valueAcc, keyFn, xf);\n  };\n}","var XWrap = /*#__PURE__*/function () {\n  function XWrap(fn) {\n    this.f = fn;\n  }\n  XWrap.prototype['@@transducer/init'] = function () {\n    throw new Error('init not implemented on XWrap');\n  };\n  XWrap.prototype['@@transducer/result'] = function (acc) {\n    return acc;\n  };\n  XWrap.prototype['@@transducer/step'] = function (acc, x) {\n    return this.f(acc, x);\n  };\n  return XWrap;\n}();\nexport default function _xwrap(fn) {\n  return new XWrap(fn);\n}","import reduceBy from \"./reduceBy.js\";\n\n/**\n * Given a function that generates a key, turns a list of objects into an\n * object indexing the objects by the given key. Note that if multiple\n * objects generate the same value for the indexing key only the last value\n * will be included in the generated object.\n *\n * Acts as a transducer if a transformer is given in list position.\n *\n * @func\n * @memberOf R\n * @since v0.19.0\n * @category List\n * @typedefn Idx = String | Int | Symbol\n * @sig Idx a => (b -> a) -> [b] -> {a: b}\n * @param {Function} fn Function :: a -> Idx\n * @param {Array} array The array of objects to index\n * @return {Object} An object indexing each array element by the given property.\n * @see R.groupBy\n * @example\n *\n *      const list = [{id: 'xyz', title: 'A'}, {id: 'abc', title: 'B'}];\n *      R.indexBy(R.prop('id'), list);\n *      //=> {abc: {id: 'abc', title: 'B'}, xyz: {id: 'xyz', title: 'A'}}\n */\nvar indexBy = /*#__PURE__*/reduceBy(function (acc, elem) {\n  return elem;\n}, null);\nexport default indexBy;","import _clone from \"./internal/_clone.js\";\nimport _curryN from \"./internal/_curryN.js\";\nimport _dispatchable from \"./internal/_dispatchable.js\";\nimport _has from \"./internal/_has.js\";\nimport _reduced from \"./internal/_reduced.js\";\nimport _xReduce from \"./internal/_xReduce.js\";\nimport _xreduceBy from \"./internal/_xreduceBy.js\";\nimport _xwrap from \"./internal/_xwrap.js\";\n\n/**\n * Groups the elements of the list according to the result of calling\n * the String-returning function `keyFn` on each element and reduces the elements\n * of each group to a single value via the reducer function `valueFn`.\n *\n * The value function receives two values: *(acc, value)*. It may use\n * [`R.reduced`](#reduced) to short circuit the iteration.\n *\n * This function is basically a more general [`groupBy`](#groupBy) function.\n *\n * Acts as a transducer if a transformer is given in list position.\n *\n * @func\n * @memberOf R\n * @since v0.20.0\n * @category List\n * @sig ((a, b) -> a) -> a -> (b -> String) -> [b] -> {String: a}\n * @param {Function} valueFn The function that reduces the elements of each group to a single\n *        value. Receives two values, accumulator for a particular group and the current element.\n * @param {*} acc The (initial) accumulator value for each group.\n * @param {Function} keyFn The function that maps the list's element into a key.\n * @param {Array} list The array to group.\n * @return {Object} An object with the output of `keyFn` for keys, mapped to the output of\n *         `valueFn` for elements which produced that key when passed to `keyFn`.\n * @see R.groupBy, R.reduce, R.reduced\n * @example\n *\n *      const groupNames = (acc, {name}) => acc.concat(name)\n *      const toGrade = ({score}) =>\n *        score < 65 ? 'F' :\n *        score < 70 ? 'D' :\n *        score < 80 ? 'C' :\n *        score < 90 ? 'B' : 'A'\n *\n *      var students = [\n *        {name: 'Abby', score: 83},\n *        {name: 'Bart', score: 62},\n *        {name: 'Curt', score: 88},\n *        {name: 'Dora', score: 92},\n *      ]\n *\n *      reduceBy(groupNames, [], toGrade, students)\n *      //=> {\"A\": [\"Dora\"], \"B\": [\"Abby\", \"Curt\"], \"F\": [\"Bart\"]}\n */\nvar reduceBy = /*#__PURE__*/_curryN(4, [], /*#__PURE__*/_dispatchable([], _xreduceBy, function reduceBy(valueFn, valueAcc, keyFn, list) {\n  var xf = _xwrap(function (acc, elt) {\n    var key = keyFn(elt);\n    var value = valueFn(_has(key, acc) ? acc[key] : _clone(valueAcc, false), elt);\n    if (value && value['@@transducer/reduced']) {\n      return _reduced(acc);\n    }\n    acc[key] = value;\n    return acc;\n  });\n  return _xReduce(xf, {}, list);\n}));\nexport default reduceBy;","export default function _reduced(x) {\n  return x && x['@@transducer/reduced'] ? x : {\n    '@@transducer/value': x,\n    '@@transducer/reduced': true\n  };\n}","import {Point} from 'types'\n\nexport const pointToString = (point: Point) => `${point.x}-${point.y}-${point.z}`\n","import {octree} from 'd3-octree'\nimport Rprop from 'ramda/es/prop'\nimport RsplitEvery from 'ramda/es/splitEvery'\nimport {\n  ClusteringResult,\n  CorePoints,\n  DbscanConfig,\n  Space3d,\n} from 'types'\nimport {\n  dbScan,\n  generateNonOverlappingSpheres,\n  getPointGrid,\n  getVoidPoints,\n  serializeTree,\n} from 'utils'\n\nconst defaultConcurrency = 4\nconst coreFinderScriptPath = '/assets/workers/dbscan-core-finder.js'\n\nself.onmessage = ({data}: {data: DbscanConfig}) => {\n  const space: Space3d = {lenx: data.lenx, leny: data.leny, lenz: data.lenz}\n  const sphereRadius = data.size\n  const maxTryCount = data.maxTry\n  const eps = data.eps\n  const minPoints = data.k\n\n  const spheres = generateNonOverlappingSpheres(\n    {space, sphereRadii: [sphereRadius], maxTryCount, maxCount: data.maxCount})\n\n  const gridStep = data.step\n  const points = getPointGrid({gridStep, space})\n  const voidPoints = getVoidPoints({spheres, points})\n  const tree = octree(voidPoints, Rprop('x'), Rprop('y'), Rprop('z'))\n\n  const maxThreads = navigator.hardwareConcurrency || defaultConcurrency\n  const voidPartSize = Math.ceil(voidPoints.length / maxThreads)\n  const voidParts = RsplitEvery(voidPartSize, voidPoints)\n\n  const corePoints$ = Promise.all(\n    voidParts.map(voidPartPoints => new Promise<CorePoints>(resolve => {\n      const worker = new Worker(coreFinderScriptPath)\n      worker.postMessage({eps, minPoints, points: voidPartPoints, tree: serializeTree(tree)})\n      worker.addEventListener('message', event => resolve(event.data))\n    })),\n  ).then((cores: CorePoints[]) =>\n    cores.reduce((all, core) => ({...all, ...core}), {}))\n\n  const clusters$ = corePoints$.then(dbScan)\n\n  clusters$.then(clusters => postMessage({\n    clusters,\n    spheres,\n    numberOfPoints: points.length,\n    numberOfVoidPoints: voidPoints.length,\n    spaceVolume: data.lenx * data.leny * data.lenz,\n  } as ClusteringResult, undefined as any))\n}\n","import {\n  Space3d,\n  Sphere,\n} from 'types'\nimport {sphereOverlaps} from 'utils/sphere-overlaps'\nimport {getRandomPoint} from './get-random-point'\nimport {randomFromArray} from './random-from-array'\n\ntype Args = {\n  sphereRadii: number[];\n  space: Space3d;\n  maxCount?: number;\n  maxTryCount: number;\n}\n\nexport const generateNonOverlappingSpheres = (args: Args): Sphere[] => {\n  const {sphereRadii, space, maxCount, maxTryCount} = args\n\n  // region State\n  const resultSpheres: Sphere[] = []\n  let failedCount = 0\n  // endregion\n\n  // region Utils\n  const randomRadius = () => randomFromArray(sphereRadii)\n  const checkMaxCount = () => maxCount ? (resultSpheres.length <= maxCount - 1) : true\n  const checkFailed = () => failedCount <= maxTryCount\n  // endregion\n\n  while (checkMaxCount() && checkFailed()) {\n    // Generate random sphere considering available points\n    const sphere: Sphere = {coord: getRandomPoint(space), r: randomRadius()}\n\n    if (resultSpheres.some(s => sphereOverlaps(sphere, s))) failedCount++\n    else {\n      resultSpheres.push(sphere)\n      failedCount = 0\n    }\n  }\n\n  return resultSpheres\n}\n","export const randomFromArray = <T>(arr: T[]) => arr[Math.floor(Math.random() * arr.length)]\n","import {Sphere} from 'types'\nimport {pointDistance} from './point-distance'\n\nexport const sphereOverlaps = (s1: Sphere, s2: Sphere) =>\n  pointDistance(s1.coord, s2.coord) < (s1.r + s2.r)\n","import {\n  Point,\n  Space3d,\n} from 'types'\nimport {createPoint} from './create-point'\n\ntype Args = {\n  gridStep: number;\n  space: Space3d;\n}\n\nexport const getPointGrid = ({gridStep, space}: Args) => {\n  // Number of points on respective axis\n  const numX = Math.floor(space.lenx / gridStep)\n  const numY = Math.floor(space.leny / gridStep)\n  const numZ = Math.floor(space.lenz / gridStep)\n\n  const result: Point[] = []\n\n  for (let z = 0; z < numZ; z++)\n    for (let y = 0; y < numY; y++)\n      for (let x = 0; x < numX; x++)\n        result.push(createPoint(x * gridStep, y * gridStep, z * gridStep))\n\n  return result\n}\n","import {octree} from 'd3-octree'\nimport Rchain from 'ramda/es/chain'\nimport RindexBy from 'ramda/es/indexBy'\nimport Rprop from 'ramda/es/prop'\nimport {\n  Point,\n  Sphere,\n} from 'types'\nimport {getNeighbors} from './get-neighbors'\nimport {pointToString} from './point-to-string'\n\ntype Args = {\n  spheres: Sphere[];\n  points: Point[];\n}\n\nexport const getVoidPoints = ({points, spheres}: Args) => {\n  const tree = octree(points, Rprop('x'), Rprop('y'), Rprop('z'))\n\n  const spherePoints = Rchain(s => getNeighbors({tree, eps: s.r, point: s.coord}), spheres)\n  const spherePointMap = RindexBy(pointToString, spherePoints)\n\n  return points.filter(p => !spherePointMap[pointToString(p)])\n}\n","import {\n  Octree,\n  OctreeInternalNode,\n  OctreeLeaf,\n} from 'd3-octree'\nimport {\n  Point,\n  SimplePoint,\n  Udf,\n} from 'types'\nimport {cubeOverlapsSphere} from './cube-overlaps-sphere'\nimport {pointsEqual} from './points-equal'\nimport {sphereContains} from './sphere-contains'\n\ntype Args = {\n  eps: number;\n  point: SimplePoint;\n  tree: Octree<Point>;\n}\n\nconst isLeaf = (node: OctreeInternalNode<Point> | OctreeLeaf<Point>): node is OctreeLeaf<Point> => !node.length\n\nexport const getNeighbors = ({tree, eps, point}: Args): Point[] => {\n  const result: Point[] = []\n\n  tree.visit((node, x0, y0, z0, x1, y1, z1) => {\n    if (!cubeOverlapsSphere(\n      {x: x0, y: y0, z: z0},\n      {x: x1, y: y1, z: z1},\n      eps,\n      point,\n    )) return true\n\n    if (isLeaf(node)) {\n      let testPoint: Udf<Point> = node.data\n      // noinspection JSAssignmentUsedAsCondition\n      do if (\n        !pointsEqual(testPoint, point) &&\n        sphereContains({coord: point, r: eps}, testPoint)\n      ) result.push(testPoint)\n      // tslint:disable-next-line:no-conditional-assignment\n      while (testPoint = node.next && node.next.data)\n    }\n  })\n\n  return result\n}\n","import {\n  Dict,\n  Dimension,\n  SimplePoint,\n} from 'types'\nimport {addSimplePoints} from './add-simple-points'\nimport {multiplySimplePoint} from './multiply-simple-point'\nimport {sphereContains} from './sphere-contains'\n\nexport const cubeOverlapsSphere = (lower: SimplePoint, upper: SimplePoint, r: number, c: SimplePoint) => {\n  const half = 0.5\n  const cubeHalf = (upper.x - lower.x) * half\n  const cubeCenter = multiplySimplePoint(half, addSimplePoints(lower, upper))\n  const cubeCenterMinus = multiplySimplePoint(-1, cubeCenter)\n\n  // Go to coordinate system in the center of cube\n  const cSphere = addSimplePoints(c, cubeCenterMinus)\n\n  const dimensions: Dimension[] = ['x', 'y', 'z']\n  const otherDimensions: Dict<Dimension[]> = {\n    x: ['y', 'z'],\n    y: ['x', 'z'],\n    z: ['x', 'y'],\n  }\n\n  const condition1 = dimensions.some(\n    dimension =>\n      (cSphere[dimension] >= -cubeHalf - r) &&\n      (cSphere[dimension] <= cubeHalf + r) &&\n      otherDimensions[dimension].every(otherD => (cSphere[otherD] >= -cubeHalf) && (cSphere[otherD] <= cubeHalf)),\n  )\n\n  const cubeVertexes: SimplePoint[] = [\n    {x: cubeHalf, y: cubeHalf, z: cubeHalf},\n    {x: cubeHalf, y: cubeHalf, z: -cubeHalf},\n    {x: cubeHalf, y: -cubeHalf, z: cubeHalf},\n    {x: -cubeHalf, y: cubeHalf, z: cubeHalf},\n    {x: -cubeHalf, y: -cubeHalf, z: cubeHalf},\n    {x: cubeHalf, y: -cubeHalf, z: -cubeHalf},\n    {x: -cubeHalf, y: cubeHalf, z: -cubeHalf},\n    {x: -cubeHalf, y: -cubeHalf, z: -cubeHalf},\n  ]\n\n  const condition2 = cubeVertexes.some(s => sphereContains({coord: cSphere, r}, s))\n\n  return condition1 || condition2\n}\n","import {SimplePoint} from 'types'\n\nexport const pointsEqual = (p1: SimplePoint, p2: SimplePoint) =>\n  (p1.x === p2.x) && (p1.y === p2.y) && (p1.z === p2.z)\n"],"names":["tree","x","y","z","d","isNaN","parent","xm","ym","zm","xp","yp","zp","right","bottom","deep","i","j","node","_root","leaf","data","x0","_x0","y0","_y0","z0","_z0","x1","_x1","y1","_y1","z1","_z1","length","_x","call","_y","_z","next","Array","this","defaultX","defaultY","defaultZ","nodes","Octree","NaN","addAll","undefined","leaf_copy","copy","treeProto","prototype","_isPlaceholder","a","_curry1","fn","f1","arguments","apply","_curry2","f2","b","_b","_a","child","source","target","pop","push","add","cover","n","xz","yz","zz","Infinity","Math","floor","t","visit","extent","_","find","radius","x2","y2","z2","q","x3","y3","z3","octs","dx","dy","dz","d2","sqrt","remove","retainer","previous","removeAll","root","size","callback","visitAfter","Number","isInteger","p","obj","offset","list","_isInteger","isArray","val","Object","toString","_checkForMethod","methodname","_isArray","slice","_curry3","f3","c","_c","fromIndex","toIndex","Error","result","idx","pow2","num","pointDistance","p1","p2","counter","createPoint","id","random","getRandomPoint","space","ranX","lenx","ranY","leny","ranZ","lenz","sphereContains","s","coord","r","addSimplePoints","multiplySimplePoint","_has","prop","hasOwnProperty","hasEnumBug","propertyIsEnumerable","nonEnumerableProps","hasArgsEnumBug","contains","item","keys","nIdx","ks","checkArgsLength","dbScan","corePoints","visited","clusters","Map","isCore","point","isNotVisited","addToVisited","expandCore","corePointId","cluster","neighbors","filter","neighbor","neighborCores","neighborCore","corePoint","core","set","serializeTree","names","_dispatchable","methodNames","transducerCreator","_isTransformer","transducer","_isString","_xArrayReduce","xf","acc","len","symIterator","Symbol","iterator","_createReduce","arrayReduce","methodReduce","iterableReduce","reduce","TypeError","_arity","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","thisObj","_xIterableReduce","iter","step","done","value","_xMethodReduce","methodName","tInit","tStep","tResult","XPreservingReduced","_xfBase","input","ret","XFlatCat","XMap","f","_xchain","_curryN","received","combined","argsIdx","left","combinedIdx","hasPlaceholder","max","functor","reducer","index","_arrayReduce","key","_map","monad","jlen","ilen","_makeFlat","_clone","map","_ObjectMap","type","param","pattern","copiedValue","cachedCopy","get","create","getPrototypeOf","Date","valueOf","RegExp","flags","global","ignoreCase","multiline","sticky","unicode","dotAll","hashedKey","hash","bucket","join","element","XReduceBy","valueFn","valueAcc","keyFn","inputs","_xreduceBy","XWrap","elt","elem","pointToString","self","onmessage","sphereRadius","maxTryCount","maxTry","eps","minPoints","k","spheres","args","sphereRadii","maxCount","resultSpheres","failedCount","sphere","arr","some","sphereOverlaps","s2","s1","generateNonOverlappingSpheres","points","gridStep","numX","numY","numZ","getPointGrid","voidPoints","spherePoints","lower","upper","cubeHalf","cubeCenter","cubeCenterMinus","cSphere","otherDimensions","condition1","dimension","every","otherD","condition2","cubeOverlapsSphere","isLeaf","testPoint","spherePointMap","getVoidPoints","maxThreads","navigator","hardwareConcurrency","voidPartSize","ceil","voidParts","Promise","all","voidPartPoints","resolve","worker","Worker","postMessage","addEventListener","event","then","cores","numberOfPoints","numberOfVoidPoints","spaceVolume"],"sourceRoot":""}